<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Padsala | Galaxy Focus</title>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Plus+Jakarta+Sans:wght@700;800&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">

    <!-- PWA Settings -->
    <link rel="manifest" href="{{ url_for('static', filename='manifest.json') }}">
    <meta name="theme-color" content="#0b1020">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <script src="https://unpkg.com/lucide@latest"></script>
</head>

<body>

    <!-- GALAXY LAYERS -->
    <div class="galaxy-bg"></div>
    <div class="stars"></div>

    <div class="app-shell" id="app-shell">
        <header class="app-header">
            <div class="logo">
                <i data-lucide="zap" style="color: #a78bfa;"></i>
                PADSALA
            </div>
            <nav class="app-nav">
                <button class="nav-link active" onclick="switchView('home')" id="nav-home">Home</button>
                <button class="nav-link" id="nav-dashboard" onclick="switchView('dashboard')">
                    <i data-lucide="layout-grid"></i>
                    <span>Plan</span>
                </button>
                <button class="nav-link" id="nav-leaderboard" onclick="switchView('leaderboard')">
                    <i data-lucide="trophy"></i>
                    <span>Arena</span>
                </button>
                <button class="nav-link" onclick="switchView('analytics')" id="nav-analytics">Mind Mirror</button>
            </nav>
            <div style="display: flex; align-items: center; gap: 1rem;">
                <div id="auth-status" style="font-size: 0.8rem; opacity: 0.7;">
                    <button class="control-btn" onclick="openAuthModal()">Login</button>
                </div>
                <div id="current-bs-display" style="font-size: 0.8rem; opacity: 0.7;">System Ready</div>
                <button class="control-btn" onclick="toggleSettings()"
                    style="padding: 0.5rem; border: none; background: transparent;">
                    <i data-lucide="sliders-horizontal" style="width: 18px;"></i>
                </button>
            </div>
        </header>

        <!-- VIEWS -->
        <div id="view-home" class="view-section active">
            <div class="stepper">
                <div class="step-indicator active" id="ind-1"></div>
                <div class="step-indicator" id="ind-2"></div>
                <div class="step-indicator" id="ind-3"></div>
                <div class="step-indicator" id="ind-4"></div>
            </div>

            <!-- 1. WELCOME -->
            <div id="step-1" class="step-container active">
                <div style="text-align: center; padding: 2rem 0;">
                    <div class="glow-icon"
                        style="margin: 0 auto 2rem; width: 80px; height: 80px; background: rgba(139, 92, 246, 0.2); border: 1px solid var(--primary); border-radius: 24px; display: flex; align-items: center; justify-content: center; box-shadow: var(--neon-shadow);">
                        <i data-lucide="sparkles" style="width: 40px; height: 40px; color: var(--primary);"></i>
                    </div>
                    <h1 class="text-gradient" style="font-size: 3rem; margin-bottom: 1rem;">System Bridge</h1>
                    <p style="font-size: 1.1rem; color: #94a3b8; max-width: 600px; margin: 0 auto 3rem;">
                        Manage your current cognitive architecture or initialize new study protocols for upcoming exam
                        phases.
                    </p>

                    <div id="home-protocols-container"
                        style="display: flex; flex-direction: column; gap: 1rem; max-width: 500px; margin: 0 auto;">
                        <!-- Quick Link to Dashboard -->
                        <button class="btn-primary" onclick="initiateNewProtocol()"
                            style="justify-content: center; font-size: 1.1rem; padding: 1.5rem;">
                            Initialize New Protocol <i data-lucide="plus-circle"></i>
                        </button>

                        <div id="home-active-summary" class="glass-card" style="padding: 1.5rem; display: none;">
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <span style="font-size: 0.9rem; opacity: 0.7;">Active Protocols:</span>
                                <span id="home-protocol-count" style="font-weight: 800; color: var(--primary);">0</span>
                            </div>
                            <button class="control-btn" onclick="switchView('dashboard')"
                                style="width: 100%; margin-top: 1rem; border-color: var(--primary); color: var(--primary);">
                                Open Dashboard <i data-lucide="layout"></i>
                            </button>
                        </div>
                    </div>

                    <div id="home-welcome-user"
                        style="margin-top: 3rem; font-weight: 600; color: #64748b; font-size: 0.9rem;">
                        Logged as <span id="welcome-username" style="color: var(--primary);">guest</span>.
                        Join the <span style="color: #fff;">Padsala Alpha</span> collective.
                    </div>
                </div>
            </div>

            <!-- 2. SETUP -->
            <div id="step-2" class="step-container">
                <div class="glass-card">
                    <h2 style="margin-bottom: 2rem;">Configuration</h2>
                    <div style="margin-bottom: 2rem;">
                        <label>Timeline Name</label>
                        <input type="text" id="schedule-name" placeholder="e.g., Regular Exams + Back papers"
                            class="stream-input" style="width: 100%;">
                    </div>
                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 2rem; margin-bottom: 2rem;">
                        <div><label>University</label><select id="select-university"
                                onchange="updateFaculties()"></select>
                        </div>
                        <div><label>Faculty</label><select id="select-faculty" onchange="updateCourses()"></select>
                        </div>
                        <div><label>Program</label><select id="select-course" onchange="updateSemesters()"></select>
                        </div>
                        <div><label>Semester</label><select id="select-semester" onchange="updateSubjects()"></select>
                        </div>
                    </div>

                    <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 1rem;">
                        <div><label>Daily Load</label><input type="number" id="daily-hours" value="8"></div>
                        <div><label>Session</label><input type="number" id="session-duration" value="90"></div>
                        <div><label>Break</label><input type="number" id="break-duration" value="15"></div>
                        <div><label>Start</label><input type="time" id="start-time" value="06:00"></div>
                    </div>

                    <div id="subject-selection-zone" style="margin-top: 3rem; display: none;">
                        <h3 style="margin-bottom: 1rem;">Select Modules</h3>
                        <div id="subjects-grid"
                            style="display: grid; gap: 1rem; grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));">
                        </div>
                        <div style="text-align: right; margin-top: 2rem;">
                            <button class="btn-primary" onclick="prepareDateInputs()">Next Phase <i
                                    data-lucide="arrow-right"></i></button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 3. DATES -->
            <div id="step-3" class="step-container">
                <div class="glass-card">
                    <h2 style="margin-bottom: 2rem;">Exam Timeline</h2>
                    <div id="exam-date-inputs" style="display: grid; gap: 1.5rem;"></div>
                    <button class="btn-primary" onclick="generateSchedule()"
                        style="margin-top: 2rem; width: 100%; justify-content: center;">Generate Blueprint</button>
                </div>
            </div>

            <!-- 4. BLUEPRINT (Inside Home for new generation) -->
            <div id="step-4" class="step-container">
                <div id="home-blueprint-content"></div>
            </div>
        </div> <!-- End view-home -->

        <!-- ANALYTICS VIEW -->
        <div id="view-analytics" class="view-section">
            <div style="display: grid; grid-template-columns: 1fr 1.5fr; gap: 2rem;">
                <!-- Left: Stats -->
                <div style="display: flex; flex-direction: column; gap: 1.5rem;">
                    <div class="glass-card" style="padding: 2rem; border-left: 4px solid var(--primary);">
                        <h3 style="margin-top: 0; opacity: 0.6; font-size: 0.8rem; text-transform: uppercase;">Avg Focus
                            Score</h3>
                        <div style="font-size: 3rem; font-weight: 800;" id="mirror-focus-score">0%</div>
                        <p style="font-size: 0.8rem; margin-top: 0.5rem; color: #22c55e;">+5% vs last week</p>
                    </div>
                    <div class="glass-card" style="padding: 2rem; border-left: 4px solid var(--accent-pink);">
                        <h3 style="margin-top: 0; opacity: 0.6; font-size: 0.8rem; text-transform: uppercase;">Burnout
                            Risk</h3>
                        <div style="font-size: 1.5rem; font-weight: 800; color: #fbbf24;" id="mirror-burnout">LOW</div>
                        <p style="font-size: 0.8rem; margin-top: 0.5rem; opacity: 0.5;">Based on 7-day density</p>
                    </div>
                    <div class="glass-card" style="padding: 2rem;">
                        <h3 style="margin-top: 0; opacity: 0.6; font-size: 0.8rem; text-transform: uppercase;">Peak Flow
                            Window</h3>
                        <div style="font-size: 1.2rem; font-weight: 700;" id="mirror-peak">06:00 - 09:00</div>
                    </div>
                </div>

                <!-- Right: Knowledge Graph / Mastery -->
                <div class="glass-card" style="padding: 2rem;">
                    <h3 style="margin-top: 0; display: flex; justify-content: space-between;">
                        <span>Knowledge Architecture</span>
                        <i data-lucide="network" style="width: 18px; opacity: 0.5;"></i>
                    </h3>
                    <div id="mastery-grid"
                        style="margin-top: 2rem; display: flex; flex-direction: column; gap: 1.5rem;">
                        <div style="text-align: center; padding: 4rem; opacity: 0.3;">
                            <i data-lucide="database" style="width: 48px; height: 48px; margin-bottom: 1rem;"></i>
                            <p>Loading Cognitive Data...</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- DASHBOARD VIEW -->
        <div id="view-dashboard" class="view-section">
            <div id="blueprint-content">
                <!-- If no schedule, show empty state -->
                <div class="glass-card" style="text-align: center; padding: 4rem 2rem;">
                    <i data-lucide="layout" style="width: 48px; height: 48px; margin-bottom: 1rem; opacity: 0.3;"></i>
                    <h2>No active plan found</h2>
                    <p style="opacity: 0.6; margin-bottom: 2rem;">Initialize your study protocol from the Home tab.</p>
                    <button class="btn-primary" onclick="switchView('home')">Start Setup Protocol</button>
                </div>
            </div>
        </div>

        <!-- LEADERBOARD VIEW (v17 Arena) -->
        <div id="view-leaderboard" class="view-section">
            <div style="text-align: center; margin-bottom: 2rem;">
                <h1
                    style="margin:0; font-size: 2.5rem; background: linear-gradient(to right, #fbbf24, #d946ef); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">
                    The Arena</h1>
                <p style="opacity: 0.7;">Top Performers in the IOE Universe</p>
            </div>

            <div class="glass-card" style="max-width: 600px; margin: 0 auto; padding: 1rem;">
                <div
                    style="display: flex; justify-content: space-between; padding: 0.5rem 1rem; opacity: 0.5; font-size: 0.8rem; text-transform: uppercase; border-bottom: 1px solid rgba(255,255,255,0.1); margin-bottom: 1rem;">
                    <span>Rank / Scholar</span>
                    <span>Experience</span>
                </div>
                <div id="leaderboard-list" style="display: flex; flex-direction: column; gap: 0.5rem;">
                    <div style="text-align: center; padding: 2rem; opacity: 0.4;">
                        <i data-lucide="loader-2" class="spin"></i> Loading Ranks...
                    </div>
                </div>
            </div>
        </div>

        <!-- GALAXY FOCUS OVERLAY -->
        <div id="focus-mode">
            <div class="focus-container">
                <!-- LEFT: TIMER -->
                <div class="timer-sector">
                    <div class="glow-ring-container">
                        <svg class="progress-ring" viewBox="0 0 350 350">
                            <defs>
                                <linearGradient id="neonGradient" x1="0%" y1="0%" x2="100%" y2="0%">
                                    <stop offset="0%" stop-color="#8b5cf6" />
                                    <stop offset="100%" stop-color="#d946ef" />
                                </linearGradient>
                                <filter id="glow">
                                    <feGaussianBlur stdDeviation="15" result="coloredBlur" />
                                    <feMerge>
                                        <feMergeNode in="coloredBlur" />
                                        <feMergeNode in="SourceGraphic" />
                                    </feMerge>
                                </filter>
                            </defs>
                            <circle stroke="rgba(255,255,255,0.03)" stroke-width="10" fill="transparent" r="155"
                                cx="175" cy="175" />
                            <circle id="timer-ring-fill" stroke="url(#neonGradient)" stroke-width="10"
                                stroke-dasharray="974" stroke-dashoffset="974" stroke-linecap="round" fill="transparent"
                                r="155" cx="175" cy="175" filter="url(#glow)"
                                style="transition: stroke-dashoffset 1s linear;" />
                        </svg>
                        <div class="timer-text" id="vault-timer">00:00</div>
                    </div>

                    <div class="timer-controls">
                        <button class="control-btn" onclick="openTimerSettings()"><i data-lucide="settings"></i> Manage
                            Timer</button>
                        <button class="control-btn primary" id="btn-play-pause" onclick="toggleTimer()"><i
                                data-lucide="play"></i> Start</button>
                        <button class="control-btn" onclick="exitFocus()"><i data-lucide="square"></i> Stop</button>
                    </div>

                    <div style="margin-top: 2rem; text-align: center;">
                        <h2 id="focus-title" style="font-size: 2rem; margin-bottom: 0.5rem;">Focus Session</h2>
                        <p id="focus-task" style="color: #94a3b8; font-size: 1.1rem;">Deep Work Protocol</p>
                    </div>
                </div>

                <!-- RIGHT: SIDEBAR -->
                <div class="focus-sidebar">
                    <!-- Stats -->
                    <div class="glass-panel">
                        <div class="stats-grid">
                            <div class="stat-item">
                                <span class="stat-val" id="stat-xp" style="color: #d946ef;">0</span>
                                <span class="stat-lbl">XP Gained</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-val" id="stat-streak" style="color: #8b5cf6;">0</span>
                                <span class="stat-lbl">Streak</span>
                            </div>
                        </div>
                        <div style="text-align: center;">
                            <span class="stat-lbl" style="display: block; margin-bottom: 5px;">Current Rank</span>
                            <span id="stat-rank" style="font-weight: 800; color: white;">INITIATE</span>
                        </div>
                    </div>

                    <!-- Focus Stream -->
                    <div class="glass-panel" style="flex: 1;">
                        <div class="focus-card-header">FOCUS STREAM</div>
                        <div class="yt-frame" id="yt-frame">
                            <div
                                style="height: 100%; display: flex; align-items: center; justify-content: center; color: #64748b; background: rgba(0,0,0,0.5);">
                                <i data-lucide="image" style="width: 32px"></i>
                            </div>
                        </div>

                        <div class="stream-input-group">
                            <input type="text" id="yt-input" class="stream-input"
                                placeholder="Paste YouTube Link or Search...">
                            <button class="control-btn" style="padding: 0.5rem;" onclick="loadYT()"><i
                                    data-lucide="search"></i></button>
                        </div>

                        <div class="preset-grid">
                            <button class="control-btn" onclick="playPreset('lofi')"
                                style="justify-content: center; font-size: 0.8rem;">Lo-Fi</button>
                            <button class="control-btn" onclick="playPreset('rain')"
                                style="justify-content: center; font-size: 0.8rem;">Rain</button>
                        </div>
                    </div>

                    <!-- Right: Knowledge Graph / Mastery -->
                    <div class="glass-card" style="padding: 2rem;">
                        <h3 style="margin-top: 0; display: flex; justify-content: space-between;">
                            <span>Knowledge Architecture</span>
                            <i data-lucide="network" style="width: 18px; opacity: 0.5;"></i>
                        </h3>
                        <div id="mastery-grid"
                            style="margin-top: 2rem; display: flex; flex-direction: column; gap: 1.5rem;">
                            <div style="text-align: center; padding: 4rem; opacity: 0.3;">
                                <i data-lucide="database" style="width: 48px; height: 48px; margin-bottom: 1rem;"></i>
                                <p>Loading Cognitive Data...</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- BOTTOM: MUSIC PLAYER -->
            <div class="music-bar">
                <div class="visualizer-container">
                    <div class="v-bar" style="animation-delay: 0s"></div>
                    <div class="v-bar" style="animation-delay: 0.1s"></div>
                    <div class="v-bar" style="animation-delay: 0.2s"></div>
                    <div class="v-bar" style="animation-delay: 0.3s"></div>
                    <div class="v-bar" style="animation-delay: 0.4s"></div>
                    <div class="v-bar" style="animation-delay: 0.5s"></div>
                    <div class="v-bar" style="animation-delay: 0.6s"></div>
                    <div class="v-bar" style="animation-delay: 0.7s"></div>
                    <div class="v-bar" style="animation-delay: 0.8s"></div>
                    <div class="v-bar" style="animation-delay: 0.5s"></div>
                    <div class="v-bar" style="animation-delay: 0.2s"></div>
                    <div class="v-bar" style="animation-delay: 0s"></div>
                </div>

                <div class="player-controls">
                    <i data-lucide="skip-back" style="cursor: pointer;"></i>
                    <div class="play-cir" onclick="toggleTimer()">
                        <i data-lucide="play" id="bar-play-icon" style="fill: white;"></i>
                    </div>
                    <i data-lucide="skip-forward" style="cursor: pointer;"></i>
                </div>
            </div>
        </div>

        <!-- GALAXY ADJUST MODAL -->
        <div id="adjust-modal" class="modal-overlay">
            <div class="glass-card modal-content animate-in">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
                    <h2><i data-lucide="sliders" style="color: #a78bfa;"></i> Time Distortion</h2>
                    <button class="control-btn" onclick="closeAdjustModal()"><i data-lucide="x"></i></button>
                </div>

                <div style="margin-bottom: 2rem;">
                    <label style="display: flex; justify-content: space-between;">
                        <span>Study Intensity</span>
                        <span id="label-hours-val" style="color: #d946ef; font-weight: 800;">8 Hours</span>
                    </label>
                    <input type="range" id="adjust-hours-range" min="0" max="18" step="1" value="8"
                        style="width: 100%; margin-top: 1rem;"
                        oninput="document.getElementById('label-hours-val').innerText = this.value + ' Hours'">
                    <p style="font-size: 0.8rem; color: #64748b; margin-top: 0.5rem;">Select 0 for a HOLIDAY / REST DAY.
                    </p>
                </div>

                <div style="margin-bottom: 2rem;">
                    <label>Shift Realities (Start Time)</label>
                    <input type="time" id="adjust-start-time" class="stream-input"
                        style="margin-top: 1rem; width: 100%;">
                </div>

                <button class="btn-primary" id="btn-save-adjust" style="width: 100%; justify-content: center;">
                    Apply Distortion <i data-lucide="zap"></i>
                </button>
            </div>
        </div>

        <!-- SETTINGS MODAL -->
        <div class="modal-overlay" id="settings-modal">
            <div class="modal-content glass-card" style="max-width: 400px; padding: 2rem;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
                    <h2 class="text-gradient">System Settings</h2>
                    <button class="control-btn" onclick="toggleSettings()"
                        style="border: none; background: transparent;">
                        <i data-lucide="x"></i>
                    </button>
                </div>

                <div style="margin-bottom: 2rem;">
                    <h3
                        style="font-size: 0.9rem; color: var(--text-muted); text-transform: uppercase; margin-bottom: 1rem;">
                        Voice Assistant (Senior Dai)
                    </h3>

                    <div
                        style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                        <span>Enable Voice</span>
                        <label class="switch">
                            <input type="checkbox" id="voice-toggle" checked
                                onchange="voiceSystem.toggle(this.checked)">
                            <span class="slider round"></span>
                        </label>
                    </div>

                    <div style="margin-bottom: 1.5rem;">
                        <label style="display: block; margin-bottom: 0.5rem;">Personality Mode</label>
                        <div class="preset-grid">
                            <button class="control-btn active" id="mode-serious"
                                onclick="voiceSystem.setMode('serious')">Serious</button>
                            <button class="control-btn" id="mode-light"
                                onclick="voiceSystem.setMode('light')">Light</button>
                        </div>
                    </div>

                    <div>
                        <label style="display: block; margin-bottom: 0.5rem;">Volume</label>
                        <input type="range" id="voice-volume" min="0" max="1" step="0.1" value="0.8"
                            style="width: 100%; margin-top: 0.5rem;" onchange="voiceSystem.setVolume(this.value)">
                    </div>
                </div>

                <div style="text-align: center; font-size: 0.8rem; opacity: 0.6; margin-top: 2rem;">
                    Padsala v17 | Cognitive Engine
                </div>
            </div>
        </div>

        <!-- GALAXY AUTH MODAL -->
        <div id="auth-modal" class="modal-overlay">
            <div class="glass-card modal-content animate-in" style="max-width: 400px;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
                    <h2 id="auth-modal-title">Access Protocol</h2>
                    <button class="control-btn" onclick="closeAuthModal()"><i data-lucide="x"></i></button>
                </div>

                <div id="login-form">
                    <div class="input-group">
                        <input type="text" id="login-username" class="stream-input" placeholder=" " required>
                        <label class="input-label"><i data-lucide="user" style="width: 14px;"></i> Mission ID</label>
                    </div>
                    <div class="input-group">
                        <input type="password" id="login-password" class="stream-input" placeholder=" " required>
                        <label class="input-label"><i data-lucide="key" style="width: 14px;"></i> Access Key</label>
                        <i data-lucide="eye"
                            style="position: absolute; right: 1rem; top: 50%; transform: translateY(-50%); cursor: pointer; opacity: 0.5;"
                            onclick="togglePassword('login-password')"></i>
                    </div>
                    <button class="btn-primary" onclick="handleAuth('login')"
                        style="width: 100%; justify-content: center;">
                        Initiate Connection <i data-lucide="zap"></i>
                    </button>
                    <p style="text-align: center; margin-top: 1.5rem; font-size: 0.9rem; opacity: 0.6;">
                        New Recruit? <a href="#" onclick="toggleAuthForm('register')"
                            style="color: var(--primary); text-decoration: none; border-bottom: 1px dashed;">Register
                            Identity</a>
                    </p>
                </div>

                <div id="register-form" style="display: none;">
                    <div class="input-group">
                        <input type="text" id="reg-username" class="stream-input" placeholder=" " required>
                        <label class="input-label"><i data-lucide="user-plus" style="width: 14px;"></i> Target
                            ID</label>
                    </div>
                    <div class="input-group">
                        <input type="password" id="reg-password" class="stream-input" placeholder=" " required>
                        <label class="input-label"><i data-lucide="lock" style="width: 14px;"></i> Encryption
                            Code</label>
                        <i data-lucide="eye"
                            style="position: absolute; right: 1rem; top: 50%; transform: translateY(-50%); cursor: pointer; opacity: 0.5;"
                            onclick="togglePassword('reg-password')"></i>
                    </div>
                    <button class="btn-primary" onclick="handleAuth('register')"
                        style="width: 100%; justify-content: center;">
                        Establish Link <i data-lucide="shield-check"></i>
                    </button>
                    <p style="text-align: center; margin-top: 1.5rem; font-size: 0.9rem; opacity: 0.6;">
                        Identified? <a href="#" onclick="toggleAuthForm('login')"
                            style="color: var(--primary); text-decoration: none; border-bottom: 1px dashed;">Return to
                            Bridge</a>
                    </p>
                </div>
            </div>
        </div>

        <div id="neural-modal" class="modal-overlay">
            <div class="glass-card" style="max-width: 500px; padding: 3rem; text-align: center;">
                <div class="glow-icon"
                    style="margin: 0 auto 1.5rem; width: 60px; height: 60px; background: #22c55e; border-radius: 20px; display: flex; align-items: center; justify-content: center; box-shadow: 0 0 30px rgba(34, 197, 94, 0.4);">
                    <i data-lucide="brain-circuit" style="color: white; width: 30px; height: 30px;"></i>
                </div>
                <h2 style="margin-bottom: 0.5rem;">Neural Encoding</h2>
                <p style="opacity: 0.6; margin-bottom: 2rem;">Active Recall: Summarize your deep work session to lock it
                    into long-term memory.</p>
                <textarea id="neural-input" class="stream-input"
                    style="width: 100%; height: 120px; margin-bottom: 2rem; resize: none;"
                    placeholder="What did you master today?"></textarea>
                <button class="btn-primary" onclick="submitNeural()" style="width: 100%; justify-content: center;">
                    Lock Session <i data-lucide="shield-check"></i>
                </button>
            </div>
        </div>
        <div id="snow-container"></div>

        <script src="{{ url_for('static', filename='js/main.js') }}"></script>
        <script>lucide.createIcons();</script>
</body>

</html>